# cps推广系统设计
CPS 就是业务上的各种推广、邀请、拉新等活动，
类似类似代理系统,但是独立运行, 主要推广人为 用户,
实现目标: 用户主动推广给自己圈子的人,`裂变用户`.
推广行为为 邀请用户注册, 推广行为为 邀请用户注册成功,
推广者 拉新,新人,支付后推广者可以获得返佣,
推广者有徒子徒孙(名称仅方便理解,实际会叫,核心客户,裂变客户), 直接新人的一定时间内订单,获得一定分成,徒孙的订单也可以获得少量分成
推广者有星级, 不同星级获得不同百分比的分成,  星级越高,分成越高,
升级判断方式,已付费徒弟数量(推荐),有效订单数,或有效订单总额(),(含徒子(徒孙)=可自定义)  
升级推荐,已付费徒弟数量,不推荐订单数量和有效订单数,大商户可能会自己推广自己,赚取返佣,这样无法实现裂变用户目标
所有返佣比例,都是按照订单真实付款金额,精确小数点后两位(超过两位部分舍弃,不能四舍五入,极端情况会计算异常,比如0.01的订单, 返佣,因四舍五入会超过了实际订单金额)),
## 预计简单流程
用户a 发送链接给用户b注册->注册成功,绑定为用户a的下级,用户a协助用户b,使用软件并完成首次购卡,用户a后台获得徒子返佣
用户b,发送链接给用户c注册->注册成功,绑定为用户b的下级,用户b协助用户c,使用软件并完成首次购卡,用户b后台活动徒子返佣,获得徒孙返佣

后端处理-订单结束后,检测用户a和b推广的有效订单数,进行升级用户推广星级

## web页面
### 用户端 (/user)
用户端 通过 url参数APPID=加密的appid值,进行区分不同应用,防止串应用,防止猜测其他应用用户端地址
使用uniapp,方便手机浏览器内置,兼容
#### 用户登陆注册 找回密码 /user/#/login
1默登陆成功后跳用户中心首页,也可以通过url内参数,跳到指定页面
页面独立运行,已经过期的用户也可以登陆,方便登陆后续费等操作,和应用互不干扰
可以jwt登陆,方便用户端登陆后,直接内置web用户中心
通过cookies,或者,url,获取推广人的信息,
登陆或注册时,一起提交,可以绑定推广人,
需要支持卡号登陆,
#### 用户个人中心(/user/#/home)
展示用户名称,手机号 用户类型,积分,余额,
#### 用户日志 
展示积分日志,余额日志,需要过滤敏感信息,仅展示基本信息
#### 续费
续费页面,显示卡类列表,购卡方式 续费按钮

### 推广中心(/user/cps) 
应用开启cps推广则显示,应用未开启则不显示
实际为用户中心的一级菜单,下边的为该一级菜单的二级菜单
#### 推广概览
展示 推广链接地址  推广等级, 推广总获利,核心客户人数(有订单数/总数),核心客户订单数  间接客户获利,间接客户订单数
#### 推广信息
展示 支持返佣的卡类, 推广返佣徒弟百分比,徒孙返佣百分比
展示 等级升级规则
#### 客户列表
展示推广的核心客户列表,付费状态,关联时间,展示,每个核心客户的裂变客户数量  该核心客户的订单数,返佣总数
手动关联客户申请
#### 返佣订单
订单 支付时间,客户用户名,客户类型(核心or裂变),订单号,订单金额,返佣比例,返佣金额,返佣时间,返佣状态(待返佣,已返佣)

#### 转化漏斗
指定时间内,点击->注册->首单
可选客户,续费卡类比例
#### 排行榜
显示当月核心客户数量 排行榜
#### 提现申请?
后续看看是否需要提现系统


## 管理后台
### cps设置
设置每个应用,是否开启推广功能,
设置每个应用,推广升级规则拉多少已付费核心用户为多少星级
设置每个应用,每个星级的核心客户订单返佣比例,裂变客户订单返佣百分比(较少)
设置每个应用,参加推广的卡类,(因为星级系统,所以不能按卡类设置返佣比例,如果按卡类设置,推广比例,无法有效驱动用户进行更多的主动推广,反正都相同,就随缘推广就好,不符合裂变客户的目的)
分销门槛自定义加入分销需要支付的金额,可设置0 无门槛
### cps风控：
行为监控：标记高频注册/IP聚集等异常行为
人工审核台：支持批量解绑作弊关系
#### 提现审核?
待定,没有企业认证,无法自动化转账,不太好实现

 








